Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp: .DS_Store
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/ZoomCocoa.xcode: cpieper.pbxuser
diff -pr ./ZoomCocoa.xcode/project.pbxproj /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/ZoomCocoa.xcode/project.pbxproj
*** ./ZoomCocoa.xcode/project.pbxproj	Tue Apr 20 17:34:28 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/ZoomCocoa.xcode/project.pbxproj	Wed Jul  7 11:00:55 2004
***************
*** 379,384 ****
--- 379,385 ----
  		};
  		4B1E3F5F050F7B8100A8E303 = {
  			children = (
+ 				7D75FAA8067E6E4B00DE46BA,
  				4BECA7F705B194AA006840BA,
  				4BDFA4BA0535E64900A8E303,
  				4B1E3F60050F7BA000A8E303,
***************
*** 1745,1750 ****
--- 1746,1755 ----
  				4B807BAA05BFEE7200681653,
  				4B807BA305BFEE2700681653,
  				4B807BA405BFEE2700681653,
+ 				7DCA56E7067486F50012F16E,
+ 				7DCA56E8067486F50012F16E,
+ 				7DD092160682F9A800B513E4,
+ 				7DD092170682F9A800B513E4,
  				4B807BEA05C009ED00681653,
  				4B807BEB05C009ED00681653,
  				4B926F8805E7F9DA00E5C0EA,
***************
*** 2337,2342 ****
--- 2342,2349 ----
  				4B13ECD6060F93F400021429,
  				4BCB09640615D0D800CDFB98,
  				4BBC1F78062F43BB00FE547F,
+ 				7DCA56E9067486F50012F16E,
+ 				7DD092180682F9A800B513E4,
  			);
  			isa = PBXHeadersBuildPhase;
  			runOnlyForDeploymentPostprocessing = 0;
***************
*** 2403,2408 ****
--- 2410,2417 ----
  				4BCB09650615D0D800CDFB98,
  				4BBC1F79062F43BB00FE547F,
  				4BB2CCD70632F01600542A81,
+ 				7DCA56EA067486F50012F16E,
+ 				7DD092190682F9A800B513E4,
  			);
  			isa = PBXSourcesBuildPhase;
  			runOnlyForDeploymentPostprocessing = 0;
***************
*** 2414,2419 ****
--- 2423,2429 ----
  				4BCF3F50050FB30100A8E303,
  				4BDFA4DF0535E72C00A8E303,
  				4BECA7F805B194AA006840BA,
+ 				7D75FAA9067E6E4B00DE46BA,
  			);
  			isa = PBXFrameworksBuildPhase;
  			runOnlyForDeploymentPostprocessing = 0;
***************
*** 3283,3288 ****
--- 3293,3378 ----
  		};
  		4BFD6B3C0538A71700A8E303 = {
  			fileRef = 4B4EF623050FDC6800A8E303;
+ 			isa = PBXBuildFile;
+ 			settings = {
+ 			};
+ 		};
+ //4B0
+ //4B1
+ //4B2
+ //4B3
+ //4B4
+ //7D0
+ //7D1
+ //7D2
+ //7D3
+ //7D4
+ 		7D75FAA8067E6E4B00DE46BA = {
+ 			isa = PBXFileReference;
+ 			lastKnownFileType = wrapper.framework;
+ 			name = Carbon.framework;
+ 			path = /System/Library/Frameworks/Carbon.framework;
+ 			refType = 0;
+ 			sourceTree = "<absolute>";
+ 		};
+ 		7D75FAA9067E6E4B00DE46BA = {
+ 			fileRef = 7D75FAA8067E6E4B00DE46BA;
+ 			isa = PBXBuildFile;
+ 			settings = {
+ 			};
+ 		};
+ 		7DCA56E7067486F50012F16E = {
+ 			fileEncoding = 4;
+ 			isa = PBXFileReference;
+ 			lastKnownFileType = sourcecode.c.h;
+ 			path = ZoomStoryTableView.h;
+ 			refType = 4;
+ 			sourceTree = "<group>";
+ 		};
+ 		7DCA56E8067486F50012F16E = {
+ 			fileEncoding = 4;
+ 			isa = PBXFileReference;
+ 			lastKnownFileType = sourcecode.c.objc;
+ 			path = ZoomStoryTableView.m;
+ 			refType = 4;
+ 			sourceTree = "<group>";
+ 		};
+ 		7DCA56E9067486F50012F16E = {
+ 			fileRef = 7DCA56E7067486F50012F16E;
+ 			isa = PBXBuildFile;
+ 			settings = {
+ 			};
+ 		};
+ 		7DCA56EA067486F50012F16E = {
+ 			fileRef = 7DCA56E8067486F50012F16E;
+ 			isa = PBXBuildFile;
+ 			settings = {
+ 			};
+ 		};
+ 		7DD092160682F9A800B513E4 = {
+ 			fileEncoding = 30;
+ 			isa = PBXFileReference;
+ 			lastKnownFileType = sourcecode.c.h;
+ 			path = ZoomCollapsingSplitView.h;
+ 			refType = 4;
+ 			sourceTree = "<group>";
+ 		};
+ 		7DD092170682F9A800B513E4 = {
+ 			fileEncoding = 30;
+ 			isa = PBXFileReference;
+ 			lastKnownFileType = sourcecode.c.objc;
+ 			path = ZoomCollapsingSplitView.m;
+ 			refType = 4;
+ 			sourceTree = "<group>";
+ 		};
+ 		7DD092180682F9A800B513E4 = {
+ 			fileRef = 7DD092160682F9A800B513E4;
+ 			isa = PBXBuildFile;
+ 			settings = {
+ 			};
+ 		};
+ 		7DD092190682F9A800B513E4 = {
+ 			fileRef = 7DD092170682F9A800B513E4;
  			isa = PBXBuildFile;
  			settings = {
  			};
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp: build
diff -pr ./src/infocom.iFiction /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/infocom.iFiction
*** ./src/infocom.iFiction	Mon Apr 12 23:17:29 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/infocom.iFiction	Fri Jun 18 10:52:57 2004
*************** The Circle rises and intones a richly wo
*** 191,196 ****
--- 191,207 ----
           <release>59</release>
         </zcode>
      </id>
+ 
+     <title>The Hitchhiker's Guide To The Galaxy</title>
+     <headline>Infocom interactive fiction - a science fiction story</headline>
+     <teaser>You wake up. The room is spinning very gently round your head. Or at least it would be if you could see it which you can't.</teaser>
+ 	<group>Infocom</group>
+ 	<year>1984</year>
+ 	<genre>Science fiction</genre>
+ 	<author>Douglas Adams and Steve Meretzky</author>
+   </story>
+ 
+   <story>
      <id>
        <format>zcode</format>
        <zcode>
*************** The Circle rises and intones a richly wo
*** 199,205 ****
  	  </zcode>
      </id>
  
!     <title>The Hitch Hiker's Guide To The Galaxy</title>
      <headline>Infocom interactive fiction - a science fiction story</headline>
      <teaser>You wake up. The room is spinning very gently round your head. Or at least it would be if you could see it which you can't.</teaser>
  	<group>Infocom</group>
--- 210,216 ----
  	  </zcode>
      </id>
  
!     <title>The Hitchhiker's Guide To The Galaxy (Solid Gold)</title>
      <headline>Infocom interactive fiction - a science fiction story</headline>
      <teaser>You wake up. The room is spinning very gently round your head. Or at least it would be if you could see it which you can't.</teaser>
  	<group>Infocom</group>
*************** Untied Press International
*** 974,979 ****
--- 985,991 ----
  	  </zcode>
  	</id>
  	<title>Trinity</title>
+ 	<headline>An Interactive Fantasy</headline>
  	<teaser>
  		Sharp words between the superpowers. Tanks in East Berlin. And now, reports the BBC, rumors of a satellite blackout. It's enough to spoil your continental breakfast.
  		<br/><br/>
*************** Hier ist ein kleiner Briefkasten.
*** 1072,1078 ****
  	    <serial>880405</serial><release>4</release>
  	  </zcode>
  	</id>
! 	<title>Leather Goddesses of Phobos (Solid Gold edition)</title>
  	<group>Infocom</group>
      <headline>Infocom interactive fiction -- a racy space-age spoof</headline>
      <teaser>
--- 1084,1090 ----
  	    <serial>880405</serial><release>4</release>
  	  </zcode>
  	</id>
! 	<title>Leather Goddesses of Phobos (Solid Gold)</title>
  	<group>Infocom</group>
      <headline>Infocom interactive fiction -- a racy space-age spoof</headline>
      <teaser>
*************** Hier ist ein kleiner Briefkasten.
*** 1090,1096 ****
  	  </zcode>
  	</id>
  	
! 	<title>Planetfall (Solid Gold edition)</title>
      <headline>Infocom interactive fiction - a science fiction story</headline>
      <teaser>
        Another routine day of drudgery aboard the Stellar Patrol Ship Feinstein. This morning's assignment for a certain lowly Ensign Seventh Class: scrubbing the filthy metal deck at the port end of Level Nine. With your Patrol-issue self-contained multi-purpose all-weather scrub brush you shine the floor with a diligence born of the knowledge that at any moment dreaded Ensign First Class Blather, the bane of your shipboard existence, could appear.
--- 1102,1108 ----
  	  </zcode>
  	</id>
  	
! 	<title>Planetfall (Solid Gold)</title>
      <headline>Infocom interactive fiction - a science fiction story</headline>
      <teaser>
        Another routine day of drudgery aboard the Stellar Patrol Ship Feinstein. This morning's assignment for a certain lowly Ensign Seventh Class: scrubbing the filthy metal deck at the port end of Level Nine. With your Patrol-issue self-contained multi-purpose all-weather scrub brush you shine the floor with a diligence born of the knowledge that at any moment dreaded Ensign First Class Blather, the bane of your shipboard existence, could appear.
*************** Hier ist ein kleiner Briefkasten.
*** 1127,1133 ****
  	    <serial>880706</serial><release>23</release>
  	  </zcode>
  	</id>
! 	<title>Wishbringer (Solid Gold edition)</title>
      <headline>The Magick Stone of Dreams</headline>
      <teaser>
  "Behind you!" cries the Princess. "It's a trap!"<br/>
--- 1139,1145 ----
  	    <serial>880706</serial><release>23</release>
  	  </zcode>
  	</id>
! 	<title>Wishbringer (Solid Gold)</title>
      <headline>The Magick Stone of Dreams</headline>
      <teaser>
  "Behind you!" cries the Princess. "It's a trap!"<br/>
*************** The reptile bellows with rage and flaps 
*** 1151,1157 ****
  	  </zcode>
  	</id>
  
!     <title>Zork I (Solid Gold Edition)</title>
      <headline>The Great Underground Empire</headline>
      <teaser>West of House<br/>
  You are standing in an open field west of a white house, with a boarded front door.<br/>
--- 1163,1169 ----
  	  </zcode>
  	</id>
  
!     <title>Zork I (Solid Gold)</title>
      <headline>The Great Underground Empire</headline>
      <teaser>West of House<br/>
  You are standing in an open field west of a white house, with a boarded front door.<br/>
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa: .DS_Store
diff -pr ./src/zoomCocoa/Preferences.nib/classes.nib /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/Preferences.nib/classes.nib
*** ./src/zoomCocoa/Preferences.nib/classes.nib	Mon Feb  2 16:39:33 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/Preferences.nib/classes.nib	Sun Jun  6 06:59:58 2004
***************
*** 5,10 ****
--- 5,11 ----
              ACTIONS = {
                  autosaveChanged = id; 
                  changeOrganiseDir = id; 
+                 changeTransparency = id; 
                  displayWarningsChanged = id; 
                  fatalWarningsChanged = id; 
                  interpreterChanged = id; 
***************
*** 30,35 ****
--- 31,37 ----
                  organiseDir = NSTextView; 
                  revision = NSTextField; 
                  speakGameText = NSButton; 
+                 transparencySlider = NSSlider; 
              }; 
              SUPERCLASS = NSWindowController; 
          }
diff -pr ./src/zoomCocoa/Preferences.nib/info.nib /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/Preferences.nib/info.nib
*** ./src/zoomCocoa/Preferences.nib/info.nib	Mon Feb  2 16:39:33 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/Preferences.nib/info.nib	Sun Jun  6 06:59:58 2004
***************
*** 3,19 ****
  <plist version="1.0">
  <dict>
  	<key>IBDocumentLocation</key>
! 	<string>156 709 356 240 0 0 1280 1002 </string>
  	<key>IBEditorPositions</key>
  	<dict>
  		<key>15</key>
! 		<string>459 551 410 234 0 0 1280 1002 </string>
  		<key>28</key>
! 		<string>471 483 386 404 0 0 1280 1002 </string>
  		<key>36</key>
! 		<string>490 530 347 309 0 0 1280 1002 </string>
  		<key>9</key>
! 		<string>449 571 430 193 0 0 1280 1002 </string>
  	</dict>
  	<key>IBFramework Version</key>
  	<string>349.0</string>
--- 3,19 ----
  <plist version="1.0">
  <dict>
  	<key>IBDocumentLocation</key>
! 	<string>156 410 440 377 0 0 1280 832 </string>
  	<key>IBEditorPositions</key>
  	<dict>
  		<key>15</key>
! 		<string>435 439 410 234 0 0 1280 832 </string>
  		<key>28</key>
! 		<string>149 291 386 404 0 0 1280 832 </string>
  		<key>36</key>
! 		<string>466 379 347 354 0 0 1280 832 </string>
  		<key>9</key>
! 		<string>425 459 430 193 0 0 1280 832 </string>
  	</dict>
  	<key>IBFramework Version</key>
  	<string>349.0</string>
***************
*** 21,30 ****
  	<integer>2</integer>
  	<key>IBOpenObjects</key>
  	<array>
! 		<integer>15</integer>
  		<integer>9</integer>
  	</array>
  	<key>IBSystem Version</key>
! 	<string>7D24</string>
  </dict>
  </plist>
--- 21,30 ----
  	<integer>2</integer>
  	<key>IBOpenObjects</key>
  	<array>
! 		<integer>36</integer>
  		<integer>9</integer>
  	</array>
  	<key>IBSystem Version</key>
! 	<string>7H63</string>
  </dict>
  </plist>
Binary files ./src/zoomCocoa/Preferences.nib/keyedobjects.nib and /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/Preferences.nib/keyedobjects.nib differ
Binary files ./src/zoomCocoa/Preferences.nib/objects.nib and /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/Preferences.nib/objects.nib differ
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa: Preferences~.nib
diff -pr ./src/zoomCocoa/ZoomClientController.m /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomClientController.m
*** ./src/zoomCocoa/ZoomClientController.m	Sat Apr 17 16:56:30 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomClientController.m	Wed Jun  2 12:26:06 2004
***************
*** 49,55 ****
  		[zoomView setAutoresizingMask: NSViewWidthSizable|NSViewHeightSizable];
  	}
  
!     [zoomView setDelegate: self];
      [zoomView runNewServer: nil];
  }
  
--- 49,58 ----
  		[zoomView setAutoresizingMask: NSViewWidthSizable|NSViewHeightSizable];
  	}
  
! 	[[self window] setAlphaValue: 0.99];
! //	[[self window] invalidateShadow];
!     
! 	[zoomView setDelegate: self];
      [zoomView runNewServer: nil];
  }
  
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa: ZoomCollapsingSplitView.h
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa: ZoomCollapsingSplitView.m
diff -pr ./src/zoomCocoa/ZoomPreferenceWindow.h /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomPreferenceWindow.h
*** ./src/zoomCocoa/ZoomPreferenceWindow.h	Mon Feb  2 16:37:38 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomPreferenceWindow.h	Wed Jun  2 11:12:59 2004
***************
*** 23,28 ****
--- 23,29 ----
  	IBOutlet NSButton* speakGameText;	
  	IBOutlet NSButton* autosaveGames;
  	IBOutlet NSButton* keepGamesOrganised;
+ 	IBOutlet NSSlider* transparencySlider;
  	
  	IBOutlet NSPopUpButton* interpreter;
  	IBOutlet NSTextField* revision;
***************
*** 49,54 ****
--- 50,56 ----
  - (IBAction) speakGameTextChanged: (id) sender;
  - (IBAction) keepOrganisedChanged: (id) sender;
  - (IBAction) autosaveChanged: (id) sender;
+ - (IBAction) changeTransparency: (id)sender;
  
  - (IBAction) changeOrganiseDir: (id) sender;
  - (IBAction) resetOrganiseDir: (id) sender;
diff -pr ./src/zoomCocoa/ZoomPreferenceWindow.m /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomPreferenceWindow.m
*** ./src/zoomCocoa/ZoomPreferenceWindow.m	Sat Mar 13 19:34:46 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomPreferenceWindow.m	Tue Jun  8 12:11:24 2004
*************** static NSDictionary*  itemDictionary = n
*** 155,160 ****
--- 155,166 ----
  	[keepGamesOrganised setState: [prefs keepGamesOrganised]?NSOnState:NSOffState];
  	[autosaveGames setState: [prefs autosaveGames]?NSOnState:NSOffState];
  	
+ 	// a kind of chessy way to get the current alpha setting
+ 	float red, green, blue, alpha;
+ 	NSColor * color = [[prefs colours] objectAtIndex:0];
+ 	[color getRed:&red green:&green blue:&blue alpha:&alpha];
+ 	[transparencySlider setFloatValue:(alpha * 100.0)];
+ 	
  	[interpreter selectItemAtIndex: [prefs interpreter]-1];
  	[revision setStringValue: [NSString stringWithFormat: @"%c", [prefs revision]]];
  	
*************** static void appendStyle(NSMutableString*
*** 314,327 ****
  	[prefFonts release];
  }
  
! - (void)changeColor:(id)sender {
  	int selColour = [colours selectedRow];
  	
  	if (selColour < 0) {
  		return;
  	}
  	
! 	NSColor* colour = [[NSColorPanel sharedColorPanel] color];
  	
  	NSMutableArray* cols = [[prefs colours] mutableCopy];
  	
--- 320,336 ----
  	[prefFonts release];
  }
  
! - (void)changeColor:(id)sender {	
! 
  	int selColour = [colours selectedRow];
  	
  	if (selColour < 0) {
  		return;
  	}
  	
! 	NSColor* selected_colour = [[NSColorPanel sharedColorPanel] color];
! 	
! 	NSColor* colour = [[selected_colour colorUsingColorSpaceName: NSCalibratedRGBColorSpace] colorWithAlphaComponent:([transparencySlider floatValue] / 100.0)];
  	
  	NSMutableArray* cols = [[prefs colours] mutableCopy];
  	
*************** static void appendStyle(NSMutableString*
*** 334,339 ****
--- 343,371 ----
  	}
  	
  	[cols release];
+ }
+ 
+ - (void)changeTransparency:(id)sender {
+ 
+ 	NSMutableArray* cols = [[prefs colours] mutableCopy];
+ 	
+ 	int i;
+ 	for(  i = 0; i < [cols count]; i++ )
+ 	{
+ 		NSColor * color = [cols objectAtIndex: i];
+ 	
+ 		NSColor*  transparent_color = [[color colorUsingColorSpaceName: NSCalibratedRGBColorSpace] colorWithAlphaComponent:([transparencySlider floatValue] / 100.0)];
+ 		
+ 		[cols replaceObjectAtIndex: i
+ 						withObject: transparent_color];
+ 	}
+ 
+ 	[prefs setColours: cols];
+ 		
+ 	[colours reloadData];
+ 	
+ 	[cols release];
+ 
  }
  
  // == Various actions ==
diff -pr ./src/zoomCocoa/ZoomStoryID.m /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomStoryID.m
*** ./src/zoomCocoa/ZoomStoryID.m	Fri Mar 12 20:40:19 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomStoryID.m	Fri Jun 18 10:48:28 2004
***************
*** 63,68 ****
--- 63,69 ----
  		ident->data.zcode.release  = (((int)bytes[0x2])<<8)|((int)bytes[0x3]);
  		ident->data.zcode.checksum = (((int)bytes[0x1c])<<8)|((int)bytes[0x1d]);
  		ident->usesMd5 = 0;
+ 
  	}
  	
  	return self;
diff -pr ./src/zoomCocoa/ZoomStoryOrganiser.m /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomStoryOrganiser.m
*** ./src/zoomCocoa/ZoomStoryOrganiser.m	Mon Apr 12 17:18:11 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomStoryOrganiser.m	Fri Jun 18 10:25:03 2004
*************** static ZoomStoryOrganiser* sharedOrganis
*** 265,271 ****
  	ZoomStoryID* oldIdent;
  	
  	oldFilename = [identsToFilenames objectForKey: ident];
! 	oldIdent = [filenamesToIdents objectForKey: filename];
  	
  	if (organise) {		
  		ZoomStory* theStory = [[NSApp delegate] findStory: ident];
--- 265,271 ----
  	ZoomStoryID* oldIdent;
  	
  	oldFilename = [identsToFilenames objectForKey: ident];
! 	oldIdent = [filenamesToIdents objectForKey: oldFilename];
  	
  	if (organise) {		
  		ZoomStory* theStory = [[NSApp delegate] findStory: ident];
*************** static ZoomStoryOrganiser* sharedOrganis
*** 347,353 ****
  
  - (ZoomStoryID*) identForFilename: (NSString*) filename {
  	ZoomStoryID* res;
! 	
  	[storyLock lock];
  	res = [[[filenamesToIdents objectForKey: filename] retain] autorelease];
  	[storyLock unlock];
--- 347,353 ----
  
  - (ZoomStoryID*) identForFilename: (NSString*) filename {
  	ZoomStoryID* res;
! 		
  	[storyLock lock];
  	res = [[[filenamesToIdents objectForKey: filename] retain] autorelease];
  	[storyLock unlock];
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa: ZoomStoryTableView.h
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa: ZoomStoryTableView.m
diff -pr ./src/zoomCocoa/ZoomiFictionController.h /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomiFictionController.h
*** ./src/zoomCocoa/ZoomiFictionController.h	Mon Apr 12 16:21:41 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomiFictionController.h	Sun Jun 20 02:47:57 2004
***************
*** 11,16 ****
--- 11,17 ----
  #import "ZoomStory.h"
  #import "ZoomCollapsableView.h"
  #import "ZoomSavePreviewView.h"
+ #import "ZoomCollapsingSplitView.h"
  
  @interface ZoomiFictionController : NSWindowController {
  	IBOutlet ZoomiFButton* addButton;
***************
*** 26,31 ****
--- 27,37 ----
  	
  	IBOutlet NSDrawer* drawer;
  	IBOutlet NSView*   drawerView;
+ 
+ 	IBOutlet ZoomCollapsingSplitView * splitView;
+ 
+ 	float splitViewPercentage;
+ 	BOOL splitViewCollapsed;
  	
  	IBOutlet NSTableView* mainTableView;
  	IBOutlet NSTableView* filterTable1;
***************
*** 69,73 ****
--- 75,84 ----
  - (void) reloadTableData;
  
  - (void) mergeiFictionFromFile: (NSString*) filename;
+ 
+ - (void) addFiles: (NSArray *)filenames;
+ 
+ - (void) setupSplitView;
+ - (void) collapseSplitView;
  
  @end
diff -pr ./src/zoomCocoa/ZoomiFictionController.m /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomiFictionController.m
*** ./src/zoomCocoa/ZoomiFictionController.m	Sun Apr 18 18:42:05 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/ZoomiFictionController.m	Sun Jun 20 08:37:58 2004
*************** static NSString* ZoomNSShadowAttributeNa
*** 168,179 ****
  	[drawerButton setPushedImage: [NSImage imageNamed: @"drawer-in"]];		
  	[infoButton setPushedImage: [NSImage imageNamed: @"information-in"]];		
  	
  	[continueButton setEnabled: NO];
  	[newgameButton setEnabled: NO];
  	
  	[[self window] setFrameUsingName: @"iFiction"];
  	[[self window] setExcludedFromWindowsMenu: YES];
! 	
  	// Set up the filter table headers (panther only)
  	if (objc_lookUpClass("NSShadow") != nil) {
  		// We have NSShadow - go ahead
--- 168,182 ----
  	[drawerButton setPushedImage: [NSImage imageNamed: @"drawer-in"]];		
  	[infoButton setPushedImage: [NSImage imageNamed: @"information-in"]];		
  	
+ 	[drawerButton setEnabled: YES];
  	[continueButton setEnabled: NO];
  	[newgameButton setEnabled: NO];
  	
  	[[self window] setFrameUsingName: @"iFiction"];
  	[[self window] setExcludedFromWindowsMenu: YES];
! 
! 	[self setupSplitView];
! 		
  	// Set up the filter table headers (panther only)
  	if (objc_lookUpClass("NSShadow") != nil) {
  		// We have NSShadow - go ahead
*************** static NSString* ZoomNSShadowAttributeNa
*** 193,199 ****
  	showDrawer = YES;
  	needsUpdating = YES;
  	
! 	sortColumn = [@"group" retain];
  	
  	[mainTableView setAllowsColumnSelection: NO];
  	
--- 196,203 ----
  	showDrawer = YES;
  	needsUpdating = YES;
  	
! 	sortColumn = [@"title" retain];
! 	[mainTableView setHighlightedTableColumn:[mainTableView tableColumnWithIdentifier:sortColumn]];
  	
  	[mainTableView setAllowsColumnSelection: NO];
  	
*************** static NSString* ZoomNSShadowAttributeNa
*** 247,252 ****
--- 251,261 ----
  				   withTitle: @"Teaser"];
  	[collapseView addSubview: commentView
  				   withTitle: @"Comments"];
+ 
+ 	[mainTableView registerForDraggedTypes:[NSArray arrayWithObjects:NSFilenamesPboardType, nil]];
+ 				   
+ 	[mainTableView setDoubleAction:@selector(startNewGame:)];
+ 
  }
  
  - (void) close {
*************** static NSString* ZoomNSShadowAttributeNa
*** 258,263 ****
--- 267,276 ----
  	[[self window] saveFrameUsingName: @"iFiction"];
  }
  
+ - (void)windowDidResize:(NSNotification *)notification {
+ 	[[self window] saveFrameUsingName: @"iFiction"];
+ }
+ 
  // = Useful functions for getting info about the table =
  
  - (ZoomStoryID*) selectedStoryID {
*************** static NSString* ZoomNSShadowAttributeNa
*** 324,369 ****
  
  - (void) addFilesFromPanel: (NSOpenPanel *)sheet
  				returnCode: (int)returnCode
! 			   contextInfo: (void *)contextInfo {
  	if (returnCode != NSOKButton) return;
- 
- 	NSArray* fileTypes = [NSArray arrayWithObjects: @"z3", @"z4", @"z5", @"z6", @"z7", @"z8", nil];
  	
  	// Store the defaults
  	[[NSUserDefaults standardUserDefaults] setObject: [sheet directory]
  											  forKey: addDirectory];
  	
  	// Add all the files we can
! 	NSMutableArray* extraFiles = [NSMutableArray array];
! 	NSMutableArray* selectedFiles = [[sheet filenames] mutableCopy];
! 	NSEnumerator* selFileEnum = [selectedFiles objectEnumerator];
  	NSString* filename;
  	
! 	while (filename = [selFileEnum nextObject]) {
  		NSAutoreleasePool* p = [[NSAutoreleasePool alloc] init];
  		BOOL isDir;
  		
  		isDir = NO;
  		[[NSFileManager defaultManager] fileExistsAtPath: filename
  											 isDirectory: &isDir];
  		
  		NSString* fileType = [filename pathExtension];
  		
! 		if (isDir) {
  			NSArray* dirContents = [[NSFileManager defaultManager] directoryContentsAtPath: filename];
  			
  			NSEnumerator* dirContentsEnum = [dirContents objectEnumerator];
  			NSString* dirComponent;
  			
! 			while (dirComponent = [dirContentsEnum nextObject]) {
! 				if ([fileTypes containsObject: [dirComponent pathExtension]]) {
! 					[extraFiles addObject: [filename stringByAppendingPathComponent: dirComponent]];
! 				}
  			}
! 		} else if ([fileTypes containsObject: fileType]) {
  			ZoomStoryID* fileID = [[ZoomStoryID alloc] initWithZCodeFile: filename];
  			
! 			if (fileID != nil) {
  				[[ZoomStoryOrganiser sharedStoryOrganiser] addStory: filename
  														  withIdent: fileID
  														   organise: [[ZoomPreferences globalPreferences] keepGamesOrganised]];
--- 337,393 ----
  
  - (void) addFilesFromPanel: (NSOpenPanel *)sheet
  				returnCode: (int)returnCode
! 			   contextInfo: (void *)contextInfo 
! {
  	if (returnCode != NSOKButton) return;
  	
  	// Store the defaults
  	[[NSUserDefaults standardUserDefaults] setObject: [sheet directory]
  											  forKey: addDirectory];
  	
+ 	NSArray * filenames = [sheet filenames];
+ 	[self addFiles:filenames];
+ }
+ 
+ - (void) addFiles: (NSArray *)filenames
+ {
+ 	NSArray* fileTypes = [NSArray arrayWithObjects: @"z3", @"z4", @"z5", @"z6", @"z7", @"z8", nil];
+ 
  	// Add all the files we can
! 	NSMutableArray* selectedFiles = [filenames mutableCopy];
  	NSString* filename;
  	
! 	while( [selectedFiles count] > 0 ) 
! 	{
  		NSAutoreleasePool* p = [[NSAutoreleasePool alloc] init];
  		BOOL isDir;
  		
+ 		filename = [selectedFiles objectAtIndex:0];
+ 
  		isDir = NO;
  		[[NSFileManager defaultManager] fileExistsAtPath: filename
  											 isDirectory: &isDir];
  		
  		NSString* fileType = [filename pathExtension];
  		
! 		if (isDir) 
! 		{
  			NSArray* dirContents = [[NSFileManager defaultManager] directoryContentsAtPath: filename];
  			
  			NSEnumerator* dirContentsEnum = [dirContents objectEnumerator];
  			NSString* dirComponent;
  			
! 			while (dirComponent = [dirContentsEnum nextObject]) 
! 			{
! 				[selectedFiles addObject: [filename stringByAppendingPathComponent: dirComponent]];
  			}
! 		} 
! 		else if ( [fileTypes containsObject: fileType] ) 
! 		{
  			ZoomStoryID* fileID = [[ZoomStoryID alloc] initWithZCodeFile: filename];
  			
! 			if (fileID != nil) 
! 			{
  				[[ZoomStoryOrganiser sharedStoryOrganiser] addStory: filename
  														  withIdent: fileID
  														   organise: [[ZoomPreferences globalPreferences] keepGamesOrganised]];
*************** static NSString* ZoomNSShadowAttributeNa
*** 371,405 ****
  				[fileID release];
  			}
  		}
! 		
! 		[p release];
! 	}
! 	
! 	// Add any extra files we got from selected directories
! 	selFileEnum = [extraFiles objectEnumerator];
! 	
! 	while (filename = [selFileEnum nextObject]) {
! 		NSAutoreleasePool* p = [[NSAutoreleasePool alloc] init];
! 		BOOL isDir;
! 		
! 		isDir = NO;
! 		[[NSFileManager defaultManager] fileExistsAtPath: filename
! 											 isDirectory: &isDir];
! 		
! 		NSString* fileType = [filename pathExtension];
! 		
! 		if (!isDir && [fileTypes containsObject: fileType]) {
! 			ZoomStoryID* fileID = [[ZoomStoryID alloc] initWithZCodeFile: filename];
! 			
! 			if (fileID != nil) {
! 				[[ZoomStoryOrganiser sharedStoryOrganiser] addStory: filename
! 														  withIdent: fileID
! 														   organise: [[ZoomPreferences globalPreferences] keepGamesOrganised]];
  				
- 				[fileID release];
- 			}
- 		}
- 		
  		[p release];
  	}
  	
--- 395,403 ----
  				[fileID release];
  			}
  		}
! 
! 		[selectedFiles removeObjectAtIndex:0];
  				
  		[p release];
  	}
  	
*************** static NSString* ZoomNSShadowAttributeNa
*** 460,465 ****
--- 458,466 ----
  - (IBAction) startNewGame: (id) sender {
  	ZoomStoryID* ident = [self selectedStoryID];
  	
+ 	if( ident == NULL )
+ 		return;
+ 		
  	// If an autosave file exists, query the user
  	NSString* autosaveDir = [[ZoomStoryOrganiser sharedStoryOrganiser] directoryForIdent: ident
  																				  create: NO];
*************** int tableSorter(id a, id b, void* contex
*** 832,837 ****
--- 833,839 ----
  - (id)				tableView: (NSTableView *) aTableView 
  	objectValueForTableColumn: (NSTableColumn *) aTableColumn 
  						  row: (int) rowIndex {
+ 		
  	if (needsUpdating) [self reloadTableData];
  
  	if (aTableView == mainTableView) {
*************** int tableSorter(id a, id b, void* contex
*** 927,933 ****
  		comment = [story comment];
  		teaser = [story teaser];
  		
! 		[drawerButton setEnabled: YES];
  		
  		NSString* dir = [[ZoomStoryOrganiser sharedStoryOrganiser] directoryForIdent: ident 
  																			  create: NO];
--- 929,935 ----
  		comment = [story comment];
  		teaser = [story teaser];
  		
! 	//	[drawerButton setEnabled: YES];
  		
  		NSString* dir = [[ZoomStoryOrganiser sharedStoryOrganiser] directoryForIdent: ident 
  																			  create: NO];
*************** int tableSorter(id a, id b, void* contex
*** 940,946 ****
  		comment = @"";
  		teaser = @"";
  
! 		[drawerButton setEnabled: NO];
  		[previewView setDirectoryToUse: nil];
  	}
  	
--- 942,948 ----
  		comment = @"";
  		teaser = @"";
  
! //		[drawerButton setEnabled: NO];
  		[previewView setDirectoryToUse: nil];
  	}
  	
*************** int tableSorter(id a, id b, void* contex
*** 966,977 ****
  	}
  	
  	[collapseView finishRearranging];
! 	
  	if ([comment length] == 0 && [teaser length] == 0) {
! 		[drawer close];
  	} else if (showDrawer && [[self window] isMainWindow]) {
  		[drawer open];
  	}
  }
  
  - (void)tableViewSelectionDidChange:(NSNotification *)aNotification {
--- 968,980 ----
  	}
  	
  	[collapseView finishRearranging];
! #if 0	
  	if ([comment length] == 0 && [teaser length] == 0) {
! //		[drawer close];
  	} else if (showDrawer && [[self window] isMainWindow]) {
  		[drawer open];
  	}
+ #endif
  }
  
  - (void)tableViewSelectionDidChange:(NSNotification *)aNotification {
*************** int tableSorter(id a, id b, void* contex
*** 996,1002 ****
  			  row:(int)rowIndex {
  	if (needsUpdating) [self reloadTableData];
  
! 	if (tableView == mainTableView) {
  		ZoomStoryID* ident = [storyList objectAtIndex: [mainTableView selectedRow]];
  		ZoomStory* story = [self storyForID: ident];
  		
--- 999,1005 ----
  			  row:(int)rowIndex {
  	if (needsUpdating) [self reloadTableData];
  
! 	if (tableView == mainTableView) {		
  		ZoomStoryID* ident = [storyList objectAtIndex: [mainTableView selectedRow]];
  		ZoomStory* story = [self storyForID: ident];
  		
*************** int tableSorter(id a, id b, void* contex
*** 1009,1014 ****
--- 1012,1197 ----
  	[[[NSApp delegate] userMetadata] writeToDefaultFile];
  }
  
+ - (BOOL)tableView:(NSTableView *)tv writeRows:(NSArray*)rows toPasteboard:(NSPasteboard*)pboard
+ {
+ 	if(tv != mainTableView )
+ 		return NO;
+ 		
+ 	if( [rows count] == 0 )
+ 		return NO;
+ 	
+ 	if( ![[ZoomPreferences globalPreferences] keepGamesOrganised] )
+ 		return NO;
+ 	
+ 	[mainTableView cancelEditTimer];
+ 	
+ 	NSMutableArray * fileList = [NSMutableArray array];
+ 
+ 	int i;
+ 	for( i = 0; i < [rows count]; i++ )
+ 	{
+ 		ZoomStoryID* ident = [storyList objectAtIndex:[[rows objectAtIndex:i] intValue]];
+ 		NSString* gamedir = [[ZoomStoryOrganiser sharedStoryOrganiser] directoryForIdent: ident create: NO];
+ 		if( gamedir != NULL )
+ 		{
+ 			[fileList addObject:gamedir];
+ 		}
+ 	}
+ 
+ 	[pboard declareTypes:[NSArray arrayWithObject:NSFilenamesPboardType] owner:nil];
+ 	[pboard setPropertyList:fileList forType:NSFilenamesPboardType];
+ 	
+ 	return YES;
+ }
+ 
+ - (NSDragOperation)tableView:(NSTableView *)tv
+                 validateDrop:(id <NSDraggingInfo>)sender
+                  proposedRow:(int)row
+        proposedDropOperation:(NSTableViewDropOperation)op
+ 
+ {
+     NSPasteboard * pasteboard = [sender draggingPasteboard];
+     NSArray * types = [pasteboard types];
+ 	
+ 	if( op == NSTableViewDropOn ) 
+ 	{
+ 		[tv setDropRow:row dropOperation:NSTableViewDropAbove];
+ 	}
+ 	
+ 	if( [sender draggingSource] == mainTableView )
+ 	{
+ 		return NSDragOperationNone;
+ 	}
+ 	
+ 	if( [types containsObject:NSFilenamesPboardType] )
+ 	{
+ 		return NSDragOperationCopy;
+ 	}
+ 	else
+ 	{
+ 		return NSDragOperationNone;
+ 	}
+ }
+ 
+ - (BOOL)tableView:(NSTableView *)tv 
+ 	acceptDrop:(id <NSDraggingInfo>)sender 
+ 	row:(int)row
+     dropOperation:(NSTableViewDropOperation)op
+ {
+     NSPasteboard * pasteboard = [sender draggingPasteboard];
+     NSArray * filenames = [pasteboard propertyListForType:NSFilenamesPboardType];
+ 	[self addFiles:filenames];
+ 
+ 	return YES;
+ }
+ 
+ 
+ #pragma mark -
+ /////////////////////////////////////////////////////////////////////////////
+ // split view 
+ //
+ 
+ // setupSplitView
+ //
+ //
+ 
+ - (void) setupSplitView
+ {
+ 	NSNumber * split_view_percent_number = [[NSUserDefaults standardUserDefaults] objectForKey:@"iFictionSplitViewPercentage"];
+ 	NSNumber * split_view_collapsed_number = [[NSUserDefaults standardUserDefaults] objectForKey:@"iFictionSplitViewCollapsed"];
+ 	
+ 	if( split_view_percent_number && split_view_collapsed_number )
+ 	{
+ 		splitViewPercentage = [split_view_percent_number floatValue];
+ 		splitViewCollapsed = [split_view_collapsed_number boolValue];
+ 		
+ 		if( splitViewCollapsed )
+ 		{
+ 			[splitView resizeSubviewsToPercentage:0.0];
+ 		}
+ 		else
+ 		{
+ 			[splitView resizeSubviewsToPercentage:splitViewPercentage];
+ 		}
+ 	}
+ 	else
+ 	{
+ 		splitViewPercentage = [splitView getSplitPercentage];
+ 		splitViewCollapsed = NO;
+ 	}
+ }
+ 
+ // splitViewDidResizeSubviews
+ //
+ //
+ 
+ - (void)splitViewDidResizeSubviews:(NSNotification *)notification
+ {
+ 	float pos = [splitView getSplitPercentage];
+ 	
+ 	if( pos == 0.0 )
+ 	{
+ 		[self collapseSplitView];
+ 	}
+ }
+ 
+ // splitViewMouseDownProcessed
+ //
+ //
+ 
+ - (void)splitViewMouseDownProcessed:(NSSplitView *)aSplitView 
+ {
+     float pos = [splitView getSplitPercentage];
+ 	
+ 	if( pos > 0.0 ) 
+ 	{
+ 		splitViewPercentage = pos;
+ 		splitViewCollapsed = NO;
+ 	
+ 		[[NSUserDefaults standardUserDefaults] setObject: [NSNumber numberWithFloat:splitViewPercentage] forKey:@"iFictionSplitViewPercentage"];
+ 		[[NSUserDefaults standardUserDefaults] setObject: [NSNumber numberWithBool:splitViewCollapsed] forKey:@"iFictionSplitViewCollapsed"];
+ 	}
+ }
+ 
+ // splitViewDoubleClickedOnDivider
+ //
+ //
+ 
+ - (void)splitViewDoubleClickedOnDivider:(NSSplitView *)aSplitView 
+ {
+     float pos = [splitView getSplitPercentage];
+ 	
+     if (pos == 0.0) 
+ 	{
+         [splitView resizeSubviewsToPercentage:splitViewPercentage];
+     } 
+ 	else 
+ 	{
+ 		[splitView resizeSubviewsToPercentage:0.0];
+ 		[self collapseSplitView];
+     }
+ }
+ 
+ // collapseSplitView
+ //
+ //
+ 
+ - (void)collapseSplitView
+ {	
+ 	splitViewCollapsed = YES;
+ 
+ 	[[NSUserDefaults standardUserDefaults] setObject: [NSNumber numberWithFloat:splitViewPercentage] forKey:@"iFictionSplitViewPercentage"];
+ 	[[NSUserDefaults standardUserDefaults] setObject: [NSNumber numberWithBool:splitViewCollapsed] forKey:@"iFictionSplitViewCollapsed"];
+ 		
+ 	// reset browser selection, since the browser is getting hidden
+ 	[filterTable2 selectRow: 0 byExtendingSelection: NO];
+ 	[filterTable1 selectRow: 0 byExtendingSelection: NO];
+ 		
+ 	[self reloadTableData]; [mainTableView reloadData];
+ }
+ 
+ #pragma mark -
+ 
  - (IBAction) updateGameInfo: (id) sender {
  	[self configureFromMainTableSelection];
  }
*************** int tableSorter(id a, id b, void* contex
*** 1180,1190 ****
--- 1363,1387 ----
  	// If the games are kept organised, then ask if the user wants to move games to the trash
  	// (give the option of always doing this)
  	if ([[ZoomPreferences globalPreferences] keepGamesOrganised]) {
+ 
+ #if 0
+ 		// this seems like a bit too much confirmation
+ 		
+ 		// this is more a degree of how the user will want iFiction to organize files than
+ 		// something that I think a user will want to decide dynamically on each story deletion
+ 		// moving to the trash still gives the user a chance to recover the story
+ 		
  		[[NSRunLoop currentRunLoop] performSelector: @selector(showTrashConfirm:)
  											 target: self
  										   argument: [storiesToDelete retain]
  											  order: 256
  											  modes: [NSArray arrayWithObject: NSDefaultRunLoopMode]];
+ #else
+ 		[self confirmMoveToTrash: NULL 
+ 				 returnCode: NSAlertDefaultReturn 
+ 				contextInfo:[storiesToDelete retain]];
+ #endif
+ 
  	}
  }
  
diff -pr ./src/zoomCocoa/iFiction-10.2.nib/classes.nib /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction-10.2.nib/classes.nib
*** ./src/zoomCocoa/iFiction-10.2.nib/classes.nib	Sat Apr 17 17:07:18 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction-10.2.nib/classes.nib	Sun Jun 20 02:48:48 2004
***************
*** 11,17 ****
--- 11,25 ----
              LANGUAGE = ObjC; 
              SUPERCLASS = NSObject; 
          }, 
+         {CLASS = NSSplitView; LANGUAGE = ObjC; SUPERCLASS = NSView; }, 
          {CLASS = ZoomCollapsableView; LANGUAGE = ObjC; SUPERCLASS = NSView; }, 
+         {CLASS = ZoomCollapsingSplitView; LANGUAGE = ObjC; SUPERCLASS = NSSplitView; }, 
+         {
+             ACTIONS = {editSelectedCell = id; }; 
+             CLASS = ZoomStoryTableView; 
+             LANGUAGE = ObjC; 
+             SUPERCLASS = NSTableView; 
+         }, 
          {
              CLASS = ZoomiFButton; 
              LANGUAGE = ObjC; 
***************
*** 45,50 ****
--- 53,59 ----
                  newgameButton = ZoomiFButton; 
                  saveMenu = NSMenu; 
                  searchField = NSTextField; 
+                 splitView = ZoomCollapsingSplitView; 
                  storyMenu = NSMenu; 
              }; 
              SUPERCLASS = NSWindowController; 
diff -pr ./src/zoomCocoa/iFiction-10.2.nib/info.nib /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction-10.2.nib/info.nib
*** ./src/zoomCocoa/iFiction-10.2.nib/info.nib	Sat Apr 17 17:07:18 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction-10.2.nib/info.nib	Sun Jun 20 02:48:48 2004
***************
*** 3,17 ****
  <plist version="1.0">
  <dict>
  	<key>IBDocumentLocation</key>
! 	<string>397 665 356 240 0 0 1280 1002 </string>
  	<key>IBEditorPositions</key>
  	<dict>
  		<key>128</key>
! 		<string>161 846 91 156 0 0 1280 1002 </string>
  		<key>176</key>
! 		<string>425 878 136 99 0 0 1280 1002 </string>
  		<key>179</key>
! 		<string>544 929 136 68 0 0 1280 1002 </string>
  		<key>38</key>
  		<string>557 468 214 399 0 0 1280 1002 </string>
  		<key>99</key>
--- 3,17 ----
  <plist version="1.0">
  <dict>
  	<key>IBDocumentLocation</key>
! 	<string>397 517 356 240 0 0 1280 832 </string>
  	<key>IBEditorPositions</key>
  	<dict>
  		<key>128</key>
! 		<string>161 676 91 156 0 0 1280 832 </string>
  		<key>176</key>
! 		<string>425 713 136 99 0 0 1280 832 </string>
  		<key>179</key>
! 		<string>544 760 136 68 0 0 1280 832 </string>
  		<key>38</key>
  		<string>557 468 214 399 0 0 1280 1002 </string>
  		<key>99</key>
***************
*** 23,34 ****
  	<integer>2</integer>
  	<key>IBOpenObjects</key>
  	<array>
  		<integer>179</integer>
  		<integer>5</integer>
- 		<integer>176</integer>
- 		<integer>128</integer>
  	</array>
  	<key>IBSystem Version</key>
! 	<string>7F44</string>
  </dict>
  </plist>
--- 23,34 ----
  	<integer>2</integer>
  	<key>IBOpenObjects</key>
  	<array>
+ 		<integer>128</integer>
+ 		<integer>176</integer>
  		<integer>179</integer>
  		<integer>5</integer>
  	</array>
  	<key>IBSystem Version</key>
! 	<string>7H63</string>
  </dict>
  </plist>
Binary files ./src/zoomCocoa/iFiction-10.2.nib/keyedobjects.nib and /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction-10.2.nib/keyedobjects.nib differ
Binary files ./src/zoomCocoa/iFiction-10.2.nib/objects.nib and /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction-10.2.nib/objects.nib differ
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa: iFiction-10.2~.nib
diff -pr ./src/zoomCocoa/iFiction.nib/classes.nib /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction.nib/classes.nib
*** ./src/zoomCocoa/iFiction.nib/classes.nib	Tue Apr 13 18:32:57 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction.nib/classes.nib	Sun Jun 20 02:49:31 2004
***************
*** 11,17 ****
--- 11,20 ----
              LANGUAGE = ObjC; 
              SUPERCLASS = NSObject; 
          }, 
+         {CLASS = NSSplitView; LANGUAGE = ObjC; SUPERCLASS = NSView; }, 
          {CLASS = ZoomCollapsableView; LANGUAGE = ObjC; SUPERCLASS = NSView; }, 
+         {CLASS = ZoomCollapsingSplitView; LANGUAGE = ObjC; SUPERCLASS = NSSplitView; }, 
+         {CLASS = ZoomStoryTableView; LANGUAGE = ObjC; SUPERCLASS = NSTableView; }, 
          {
              CLASS = ZoomiFButton; 
              LANGUAGE = ObjC; 
***************
*** 45,50 ****
--- 48,54 ----
                  newgameButton = ZoomiFButton; 
                  saveMenu = NSMenu; 
                  searchField = NSTextField; 
+                 splitView = ZoomCollapsingSplitView; 
                  storyMenu = NSMenu; 
              }; 
              SUPERCLASS = NSWindowController; 
diff -pr ./src/zoomCocoa/iFiction.nib/info.nib /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction.nib/info.nib
*** ./src/zoomCocoa/iFiction.nib/info.nib	Tue Apr 13 18:32:57 2004
--- /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction.nib/info.nib	Sun Jun 20 02:49:31 2004
***************
*** 3,17 ****
  <plist version="1.0">
  <dict>
  	<key>IBDocumentLocation</key>
! 	<string>397 665 356 240 0 0 1280 1002 </string>
  	<key>IBEditorPositions</key>
  	<dict>
  		<key>128</key>
! 		<string>161 846 91 156 0 0 1280 1002 </string>
  		<key>176</key>
! 		<string>425 878 136 99 0 0 1280 1002 </string>
  		<key>179</key>
! 		<string>544 929 136 68 0 0 1280 1002 </string>
  		<key>38</key>
  		<string>557 468 214 399 0 0 1280 1002 </string>
  		<key>99</key>
--- 3,17 ----
  <plist version="1.0">
  <dict>
  	<key>IBDocumentLocation</key>
! 	<string>397 517 356 240 0 0 1280 832 </string>
  	<key>IBEditorPositions</key>
  	<dict>
  		<key>128</key>
! 		<string>161 676 91 156 0 0 1280 832 </string>
  		<key>176</key>
! 		<string>425 713 136 99 0 0 1280 832 </string>
  		<key>179</key>
! 		<string>544 760 136 68 0 0 1280 832 </string>
  		<key>38</key>
  		<string>557 468 214 399 0 0 1280 1002 </string>
  		<key>99</key>
***************
*** 23,34 ****
  	<integer>2</integer>
  	<key>IBOpenObjects</key>
  	<array>
! 		<integer>179</integer>
  		<integer>128</integer>
  		<integer>176</integer>
- 		<integer>5</integer>
  	</array>
  	<key>IBSystem Version</key>
! 	<string>7F44</string>
  </dict>
  </plist>
--- 23,34 ----
  	<integer>2</integer>
  	<key>IBOpenObjects</key>
  	<array>
! 		<integer>5</integer>
  		<integer>128</integer>
+ 		<integer>179</integer>
  		<integer>176</integer>
  	</array>
  	<key>IBSystem Version</key>
! 	<string>7H63</string>
  </dict>
  </plist>
Binary files ./src/zoomCocoa/iFiction.nib/keyedobjects.nib and /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction.nib/keyedobjects.nib differ
Binary files ./src/zoomCocoa/iFiction.nib/objects.nib and /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa/iFiction.nib/objects.nib differ
Only in /Users/ahunter/Desktop/zoom-1.0.2alpha2-cp/src/zoomCocoa: iFiction~.nib
